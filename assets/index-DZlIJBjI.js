import{r as s,R as T,b as X}from"./index-CR__hKHy.js";import{u as D,c as G,b as x,S as j,a as y,P as k}from"./index-C4TypmrF.js";import{j as S}from"./jsx-runtime-CLpGMVip.js";function F(e,t,{checkForDefaultPrevented:o=!0}={}){return function(i){if(e==null||e(i),o===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Z({prop:e,defaultProp:t,onChange:o=()=>{}}){const[n,i]=H({defaultProp:t,onChange:o}),u=e!==void 0,N=u?e:n,R=D(o),a=s.useCallback(r=>{if(u){const p=typeof r=="function"?r(e):r;p!==e&&R(p)}else i(r)},[u,e,i,R]);return[N,a]}function H({defaultProp:e,onChange:t}){const o=s.useState(e),[n]=o,i=s.useRef(n),u=D(t);return s.useEffect(()=>{i.current!==n&&(u(n),i.current=n)},[n,i,u]),o}function ee(e){const t=e+"CollectionProvider",[o,n]=G(t),[i,u]=o(t,{collectionRef:{current:null},itemMap:new Map}),N=l=>{const{scope:c,children:d}=l,I=T.useRef(null),f=T.useRef(new Map).current;return S.jsx(i,{scope:c,itemMap:f,collectionRef:I,children:d})};N.displayName=t;const R=e+"CollectionSlot",a=T.forwardRef((l,c)=>{const{scope:d,children:I}=l,f=u(R,d),m=x(c,f.collectionRef);return S.jsx(j,{ref:m,children:I})});a.displayName=R;const r=e+"CollectionItemSlot",v="data-radix-collection-item",p=T.forwardRef((l,c)=>{const{scope:d,children:I,...f}=l,m=T.useRef(null),b=x(c,m),E=u(r,d);return T.useEffect(()=>(E.itemMap.set(m,{ref:m,...f}),()=>void E.itemMap.delete(m))),S.jsx(j,{[v]:"",ref:b,children:I})});p.displayName=r;function g(l){const c=u(e+"CollectionConsumer",l);return T.useCallback(()=>{const I=c.collectionRef.current;if(!I)return[];const f=Array.from(I.querySelectorAll(`[${v}]`));return Array.from(c.itemMap.values()).sort((E,w)=>f.indexOf(E.ref.current)-f.indexOf(w.ref.current))},[c.collectionRef,c.itemMap])}return[{Provider:N,Slot:a,ItemSlot:p},g,n]}var te=s.createContext(void 0);function ne(e){const t=s.useContext(te);return e||t||"ltr"}var oe=X.useId||(()=>{}),re=0;function se(e){const[t,o]=s.useState(oe());return y(()=>{e||o(n=>n??String(re++))},[e]),e||(t?`radix-${t}`:"")}function ce(e,t){return s.useReducer((o,n)=>t[o][n]??o,e)}var ie=e=>{const{present:t,children:o}=e,n=ue(t),i=typeof o=="function"?o({present:n.isPresent}):s.Children.only(o),u=x(n.ref,ae(i));return typeof o=="function"||n.isPresent?s.cloneElement(i,{ref:u}):null};ie.displayName="Presence";function ue(e){const[t,o]=s.useState(),n=s.useRef({}),i=s.useRef(e),u=s.useRef("none"),N=e?"mounted":"unmounted",[R,a]=ce(N,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const r=M(n.current);u.current=R==="mounted"?r:"none"},[R]),y(()=>{const r=n.current,v=i.current;if(v!==e){const g=u.current,l=M(r);e?a("MOUNT"):l==="none"||(r==null?void 0:r.display)==="none"?a("UNMOUNT"):a(v&&g!==l?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,a]),y(()=>{if(t){let r;const v=t.ownerDocument.defaultView??window,p=l=>{const d=M(n.current).includes(l.animationName);if(l.target===t&&d&&(a("ANIMATION_END"),!i.current)){const I=t.style.animationFillMode;t.style.animationFillMode="forwards",r=v.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=I)})}},g=l=>{l.target===t&&(u.current=M(n.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{v.clearTimeout(r),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(R),ref:s.useCallback(r=>{r&&(n.current=getComputedStyle(r)),o(r)},[])}}function M(e){return(e==null?void 0:e.animationName)||"none"}function ae(e){var n,i;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}var h="rovingFocusGroup.onEntryFocus",le={bubbles:!1,cancelable:!0},O="RovingFocusGroup",[_,K,fe]=ee(O),[de,be]=G(O,[fe]),[me,pe]=de(O),W=s.forwardRef((e,t)=>S.jsx(_.Provider,{scope:e.__scopeRovingFocusGroup,children:S.jsx(_.Slot,{scope:e.__scopeRovingFocusGroup,children:S.jsx(Ie,{...e,ref:t})})}));W.displayName=O;var Ie=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:i=!1,dir:u,currentTabStopId:N,defaultCurrentTabStopId:R,onCurrentTabStopIdChange:a,onEntryFocus:r,preventScrollOnEntryFocus:v=!1,...p}=e,g=s.useRef(null),l=x(t,g),c=ne(u),[d=null,I]=Z({prop:N,defaultProp:R,onChange:a}),[f,m]=s.useState(!1),b=D(r),E=K(o),w=s.useRef(!1),[$,U]=s.useState(0);return s.useEffect(()=>{const C=g.current;if(C)return C.addEventListener(h,b),()=>C.removeEventListener(h,b)},[b]),S.jsx(me,{scope:o,orientation:n,dir:c,loop:i,currentTabStopId:d,onItemFocus:s.useCallback(C=>I(C),[I]),onItemShiftTab:s.useCallback(()=>m(!0),[]),onFocusableItemAdd:s.useCallback(()=>U(C=>C+1),[]),onFocusableItemRemove:s.useCallback(()=>U(C=>C-1),[]),children:S.jsx(k.div,{tabIndex:f||$===0?-1:0,"data-orientation":n,...p,ref:l,style:{outline:"none",...e.style},onMouseDown:F(e.onMouseDown,()=>{w.current=!0}),onFocus:F(e.onFocus,C=>{const q=!w.current;if(C.target===C.currentTarget&&q&&!f){const L=new CustomEvent(h,le);if(C.currentTarget.dispatchEvent(L),!L.defaultPrevented){const P=E().filter(A=>A.focusable),z=P.find(A=>A.active),J=P.find(A=>A.id===d),Q=[z,J,...P].filter(Boolean).map(A=>A.ref.current);Y(Q,v)}}w.current=!1}),onBlur:F(e.onBlur,()=>m(!1))})})}),B="RovingFocusGroupItem",V=s.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:i=!1,tabStopId:u,...N}=e,R=se(),a=u||R,r=pe(B,o),v=r.currentTabStopId===a,p=K(o),{onFocusableItemAdd:g,onFocusableItemRemove:l}=r;return s.useEffect(()=>{if(n)return g(),()=>l()},[n,g,l]),S.jsx(_.ItemSlot,{scope:o,id:a,focusable:n,active:i,children:S.jsx(k.span,{tabIndex:v?0:-1,"data-orientation":r.orientation,...N,ref:t,onMouseDown:F(e.onMouseDown,c=>{n?r.onItemFocus(a):c.preventDefault()}),onFocus:F(e.onFocus,()=>r.onItemFocus(a)),onKeyDown:F(e.onKeyDown,c=>{if(c.key==="Tab"&&c.shiftKey){r.onItemShiftTab();return}if(c.target!==c.currentTarget)return;const d=Ce(c,r.orientation,r.dir);if(d!==void 0){if(c.metaKey||c.ctrlKey||c.altKey||c.shiftKey)return;c.preventDefault();let f=p().filter(m=>m.focusable).map(m=>m.ref.current);if(d==="last")f.reverse();else if(d==="prev"||d==="next"){d==="prev"&&f.reverse();const m=f.indexOf(c.currentTarget);f=r.loop?ge(f,m+1):f.slice(m+1)}setTimeout(()=>Y(f))}})})})});V.displayName=B;var Re={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ve(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ce(e,t,o){const n=ve(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Re[n]}function Y(e,t=!1){const o=document.activeElement;for(const n of e)if(n===o||(n.focus({preventScroll:t}),document.activeElement!==o))return}function ge(e,t){return e.map((o,n)=>e[(t+n)%e.length])}var Ee=W,Fe=V;export{Fe as I,ie as P,Ee as R,Z as a,se as b,be as c,F as d,ee as e,ne as u};
